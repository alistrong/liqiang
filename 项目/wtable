wtable 58自研非关系存储，
底层使用的是RocksDB(facebook开源的)，存储引擎采用LSM树 （Log-Structured Merge Tree），
LSM :分层有序的面向磁盘的数据结构，分层是指分成内存和磁盘两部分，
几个关键的元素
memtable 内存中的数据结构，用于保存最近更新的数据，按照key有序的组织这些数据，内存可能丢失，因此通过wal write ahead log机制预写日志方式保证不丢
immutable 结构，当 memtable达到一定量时，会转化成这种，这个是变成SSTable的中间状态，
SSTable,有序键值对，磁盘中的数据结构，

与B+的比较
数据更新和删除方面，B+树是原地操作，对事务支持比较好，
而 LSM tree是追加写，事务支持一般，写性能好，通过批量顺序写来换取了高吞吐的写性能

LSM 通过批量存储化技术规避磁盘随机写入问题，思想也很简单，把一颗大树拆分成多颗小树，首先写入到内存中（内存没有寻道问题）在内存中构建有序小树，随着小树
越来越大，内存中的小树会flush到磁盘中，磁盘中的树定期做merge操作，合并成大树
将数据的增量修改保存在内存中，达到一定大小后，进行排序后，将这些修改写入到磁盘中，如果这个期间有系统断电或者异常，则可能导致数据丢失，需要将数据先写入到log文件中
这样将随机写转化为追加写入，对性能有很大，如果进程中间发生问题，重启可以根据log恢复之前的数据。

当数据写入时，
内存中会有memtable数据
磁盘有WAL（write ahead log）文件和 SST(sorted string table)文件

SSTable是一种数据结构，当memtable到达一定上限后，会flush到磁盘形成SST,单个level超过大小时进行合并，

LSMtree存储引擎在levelDB,Hbase上都有使用。

wtable的内部原理，采用多集群架构，有配置中心etcd,支持实时配置推送变更，高可用。
每个小集群上有代理服务，他知道每个rowkey的位置，
小集群上核心的就是数据部分，有主从，延迟非常低，如果对数据有特殊的要求，可以设置参数指定从主库读取，

